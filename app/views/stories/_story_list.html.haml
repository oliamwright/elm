.story_list.in_progress
	.title= "IN PROGRESS"
	.header
		.field.pull= "<"
		.field.check{:'data-class' => 'story', :'data-id' => 'all'}= check_box_tag :sel
		.field.status= "STATUS"
		.field.usid
			%span.usid= "US ID"
			%span.taskid{:style => 'display: none;'}= "TASK ID"
		.field.value= "VALUE"
		.field.details= "USER STORY"
		.field.est_time= "EST. TIME"
		.field.tasks= "TASKS"
		.field.bugs= "BUGS"
		.field.act_time= "ACTUAL TIME"
		.field.created_by= "CREATED BY"
		.field.created_at= "DATE CREATED"
		.field.approved_by= "APPROVED BY"
		.field.approved_at= "APPROVED"
		.field.completed_at= "COMPLETED"
		.field.push= ">"
	.stories
		= render(:partial => 'stories/story', :collection => stories)
:javascript
	$('.header .field.usid').click(function() {
		$('.field.usid span.usid').toggle();
		$('.field.usid span.taskid').toggle();
	});

	$('.check input[name="sel"]').click(function() {
		var ch = $(this).attr('checked');
		var cl = $(this).parent().attr('data-class');
		var id = $(this).parent().attr('data-id');
		if (cl == 'sub_item' && id == 'all') {
			$(this).closest('.tasks').find('.item .check input[name="sel"]').attr('checked', ch);
		} else if (cl == 'story' && id == 'all') {
			$('input[name="sel"]').attr('checked', ch);
		} else if (cl == 'story') {
			$(this).closest('.story').next('.tasks').find('.check input[name="sel"]').attr('checked', ch);
		}
	});
